using System;
using System.Text;
using Crestron.SimplSharp;                          				// For Basic SIMPL# Classes
using Crestron.SimplSharp.CrestronSockets;

namespace MYSQL_Server_Connection
{
    public class MYSQL_Connection
    {
        public MYSQL_Connection()
        {
        }
 
        public string connectToSQL(string srvHost, ushort port, string query)
        {
            int bufferSize = 10000;
            byte[] message = Encoding.ASCII.GetBytes(query);

            TCPClient tcpClient = new TCPClient(srvHost, port, bufferSize);
            tcpClient.ConnectToServer();

            //message = Encoding.ASCII.GetBytes(query);
            CrestronConsole.Print("message = {0}", message);

            tcpClient.SendData(message, message.Length);
            
            int numBytes = tcpClient.ReceiveData();
            CrestronConsole.Print("numBytes = {0}", numBytes);

            string messageBack = Encoding.ASCII.GetString(tcpClient.IncomingDataBuffer, 0, numBytes);
            return messageBack;
        }
    }
}
